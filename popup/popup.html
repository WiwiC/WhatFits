<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatFits</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="container">
    <header class="header">
      <h1 class="logo">WhatFits</h1>
      <p class="tagline">Ask about any product</p>
    </header>

    <nav class="tabs">
      <button class="tab active" data-tab="chat">Ask Agent</button>
      <button class="tab disabled" data-tab="cart" disabled>Cart Analysis (soon)</button>
      <button class="tab" data-tab="settings">Profile</button>
    </nav>

    <main class="content">
      <!-- Chat Tab (Default) -->
      <section id="chat" class="tab-content active">
        <div class="chat-header">
          <div class="status-bar">
            <span class="status-indicator"></span>
            <span id="chat-status-text" class="status-text">No product selected</span>
          </div>
          <button id="clear-chat-btn" class="btn-clear" style="display: none;">Clear Chat</button>
        </div>
        <div id="chat-messages" class="chat-messages">
          <div class="chat-bubble system">
            Navigate to a product page and click "Start Chat" to start asking questions!
          </div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chat-input" placeholder="Ask about ingredients, timing..." disabled>
          <button id="chat-send" disabled>âž¤</button>
        </div>
        <button id="start-chat-btn" class="btn-primary" disabled>Start Chat</button>
      </section>

      <!-- Cart Tab (Coming Soon) -->
      <section id="cart" class="tab-content">
        <div class="coming-soon-placeholder">
          <h3>ðŸ›’ Cart Analysis</h3>
          <p>Coming soon! This feature will analyze your entire cart for redundancies and goal alignment.</p>
        </div>
      </section>

      <!-- Settings Tab -->
      <section id="settings" class="tab-content">
        <form id="context-form">
          <div class="questions-container">

            <!-- User Profile -->
            <fieldset class="question-group profile-section">
              <legend>User Profile</legend>
              <div class="profile-inputs">
                <div class="profile-field">
                  <label for="profile-age">Age</label>
                  <input type="number" id="profile-age" name="age" min="13" max="120" placeholder="e.g. 30">
                </div>
                <div class="profile-field">
                  <label for="profile-weight">Weight (kg)</label>
                  <input type="number" id="profile-weight" name="weight_kg" min="30" max="300" placeholder="e.g. 75">
                </div>
                <div class="profile-field">
                  <label for="profile-height">Height (cm)</label>
                  <input type="number" id="profile-height" name="height_cm" min="100" max="250" placeholder="e.g. 175">
                </div>
              </div>
              <div class="gender-options">
                <span class="gender-label">Gender:</span>
                <label><input type="radio" name="gender" value="male"> Male</label>
                <label><input type="radio" name="gender" value="female"> Female</label>
                <label><input type="radio" name="gender" value="prefer_not_to_say"> Prefer not to say</label>
              </div>
            </fieldset>

            <!-- Q1 -->
            <fieldset class="question-group">
              <legend>1. Primary goals</legend>
              <label><input type="checkbox" name="primary_goal" value="muscle_gain"> Muscle gain / physique</label>
              <label><input type="checkbox" name="primary_goal" value="fat_loss"> Fat loss</label>
              <label><input type="checkbox" name="primary_goal" value="strength"> Strength</label>
              <label><input type="checkbox" name="primary_goal" value="endurance"> Endurance / conditioning</label>
              <label><input type="checkbox" name="primary_goal" value="longevity"> Longevity / joint health</label>
              <label><input type="checkbox" name="primary_goal" value="energy"> Energy & daily performance</label>
            </fieldset>

            <!-- Q2 -->
            <fieldset class="question-group">
              <legend>2. Training frequency (typical week)</legend>
              <label><input type="radio" name="training_frequency" value="1-2x"> 1â€“2Ã— / week</label>
              <label><input type="radio" name="training_frequency" value="3x"> 3Ã— / week</label>
              <label><input type="radio" name="training_frequency" value="4-5x"> 4â€“5Ã— / week</label>
              <label><input type="radio" name="training_frequency" value="6+x"> 6Ã—+ / week</label>
              <label><input type="radio" name="training_frequency" value="irregular"> Irregular</label>
            </fieldset>

            <!-- Q3 -->
            <fieldset class="question-group">
              <legend>3. Training style</legend>
              <label><input type="checkbox" name="training_style" value="free_weights"> Free weights</label>
              <label><input type="checkbox" name="training_style" value="machines"> Machines</label>
              <label><input type="checkbox" name="training_style" value="bodyweight"> Bodyweight</label>
              <label><input type="checkbox" name="training_style" value="cardio"> Cardio (running, cycling)</label>
              <label><input type="checkbox" name="training_style" value="functional"> Functional / hybrid</label>
              <label><input type="checkbox" name="training_style" value="hiit"> Short intense sessions (HIT)</label>
            </fieldset>

            <!-- Q4 -->
            <fieldset class="question-group">
              <legend>4. Nutrition priority</legend>
              <label><input type="checkbox" name="nutrition_priority" value="muscle_gain_support"> Muscle gain and
                support</label>
              <label><input type="checkbox" name="nutrition_priority" value="fat_loss"> Fat loss</label>
              <label><input type="checkbox" name="nutrition_priority" value="energy_focus"> Energy / focus</label>
              <label><input type="checkbox" name="nutrition_priority" value="digestion"> Digestive comfort</label>
              <label><input type="checkbox" name="nutrition_priority" value="simplicity"> Simplicity / low mental
                load</label>
            </fieldset>

            <!-- Q5 -->
            <fieldset class="question-group">
              <legend>5. Dietary</legend>
              <label><input type="checkbox" name="dietary_style" value="flexible"> Flexible / no strict rules</label>
              <label><input type="checkbox" name="dietary_style" value="high_protein"> High-protein focused</label>
              <label><input type="checkbox" name="dietary_style" value="whole_foods"> Whole foods oriented</label>
              <label><input type="checkbox" name="dietary_style" value="lactose_free"> Lactose free</label>
              <label><input type="checkbox" name="dietary_style" value="vegan"> Vegan</label>
            </fieldset>

            <!-- Q6 -->
            <fieldset class="question-group">
              <legend>6. Avoidances</legend>
              <label><input type="checkbox" name="avoidances" value="ultra_processed"> Ultra-processed foods</label>
              <label><input type="checkbox" name="avoidances" value="added_sugars"> Added sugars</label>
              <label><input type="checkbox" name="avoidances" value="artificial_sweeteners"> Artificial
                sweeteners</label>
              <label><input type="checkbox" name="avoidances" value="stimulants"> Stimulants (e.g. caffeine)</label>
              <label><input type="checkbox" name="avoidances" value="none"> None</label>
            </fieldset>

            <!-- Q7 -->
            <fieldset class="question-group">
              <legend>7. Supplements intake</legend>
              <label><input type="radio" name="supplements_intake" value="regular_user"> Use some regularly</label>
              <label><input type="radio" name="supplements_intake" value="occasionally"> Use some occasionally</label>
              <label><input type="radio" name="supplements_intake" value="previously_used"> Already took in the
                past</label>
              <label><input type="radio" name="supplements_intake" value="never_used"> Never used</label>
            </fieldset>

            <!-- Q8 -->
            <fieldset class="question-group">
              <legend>8. Current priority (pick 1)</legend>
              <label><input type="radio" name="current_focus" value="visible_progress"> Visible progress</label>
              <label><input type="radio" name="current_focus" value="feeling_better"> Feeling better day-to-day</label>
              <label><input type="radio" name="current_focus" value="performance"> Performance</label>
              <label><input type="radio" name="current_focus" value="consistency"> Consistency / habit building</label>
            </fieldset>

            <!-- Q9 -->
            <fieldset class="question-group">
              <legend>9. Mental performance</legend>
              <label><input type="radio" name="mental_focus" value="not_priority"> Not a priority</label>
              <label><input type="radio" name="mental_focus" value="work_energy"> Important for work / daily
                energy</label>
              <label><input type="radio" name="mental_focus" value="both"> Both work and training</label>
              <label><input type="radio" name="mental_focus" value="struggling"> Actively struggling with focus</label>
            </fieldset>

            <!-- Q10 -->
            <fieldset class="question-group">
              <legend>10. Joints & tendons protection</legend>
              <label><input type="checkbox" name="joint_protection" value="none"> None</label>
              <label><input type="checkbox" name="joint_protection" value="knees"> Knees</label>
              <label><input type="checkbox" name="joint_protection" value="lower_back"> Lower back</label>
              <label><input type="checkbox" name="joint_protection" value="hips"> Hips</label>
              <label><input type="checkbox" name="joint_protection" value="shoulders"> Shoulders</label>
              <label><input type="checkbox" name="joint_protection" value="elbows_wrists"> Elbows / wrists</label>
              <label><input type="checkbox" name="joint_protection" value="achilles_ankles"> Achilles / ankles</label>
            </fieldset>

            <br>
            <div class="form-group">
              <label for="additional-context">Additional Context (max 500 characters)</label>
              <textarea id="additional-context" maxlength="500"
                placeholder="e.g. I have a sensitive stomach, I have pain in my shoulders, I prefer natural sweeteners, I'm training for a marathon..."></textarea>
            </div>

            <div class="form-group">
              <label for="api-key">OpenAI API Key</label>
              <input type="password" id="api-key" placeholder="sk-...">
            </div>

            <button type="submit" class="btn-primary">Save Context</button>
          </div>
        </form>
      </section>
    </main>

    <footer class="disclaimer">
      This tool evaluates alignment with your stated preferences. It does not provide medical or nutritional advice.
    </footer>
  </div>

  <script src="popup.js" type="module"></script>
</body>

</html>
