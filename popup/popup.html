<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatFits</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="container">
    <header class="header">
      <h1 class="logo">WhatFits</h1>
      <p class="tagline">Preference alignment check</p>
    </header>

    <nav class="tabs">
      <button class="tab active" data-tab="analysis">Product analysis</button>
      <button class="tab" data-tab="chat">Ask Agent</button>
      <button class="tab" data-tab="cart">Cart analysis</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <main class="content">
      <!-- Analysis Tab -->
      <section id="analysis" class="tab-content active">
        <div class="status-bar">
          <span class="status-indicator"></span>
          <span class="status-text">Detecting product...</span>
        </div>
        <div class="result-container">
          <!-- Results will be injected here -->
        </div>
        <button class="btn-primary" id="check-alignment" disabled>
          Check Alignment
        </button>
      </section>

      <!-- Chat Tab -->
      <section id="chat" class="tab-content">
        <div class="chat-header">
          <div class="status-bar">
            <span class="status-indicator"></span>
            <span id="chat-status-text" class="status-text">No product selected</span>
          </div>
        </div>
        <div id="chat-messages" class="chat-messages">
          <div class="chat-bubble system">
            Navigation to a product page and click "Start Chat" to ask questions!
          </div>
        </div>
        <div class="chat-input-area">
          <input type="text" id="chat-input" placeholder="Ask about ingredients, timing..." disabled>
          <button id="chat-send" disabled>➤</button>
        </div>
        <button id="start-chat-btn" class="btn-primary" disabled>Start Chat</button>
      </section>

      <!-- Cart Tab -->
      <section id="cart" class="tab-content">
        <div class="status-bar">
          <span class="status-indicator"></span>
          <span class="status-text">Navigate to cart page</span>
        </div>
        <div class="result-container">
          <!-- Cart results will be injected here -->
        </div>
        <button class="btn-primary" id="check-cart" disabled>
          Check Cart Coherence
        </button>
      </section>

      <!-- Settings Tab -->
      <section id="settings" class="tab-content">
        <form id="context-form">
          <div class="questions-container">

            <!-- Q1 -->
            <fieldset class="question-group">
              <legend>1. Primary goal (pick up to 2)</legend>
              <label><input type="checkbox" name="primary_goal" value="muscle_gain"> Muscle gain / physique</label>
              <label><input type="checkbox" name="primary_goal" value="fat_loss"> Fat loss</label>
              <label><input type="checkbox" name="primary_goal" value="strength"> Strength</label>
              <label><input type="checkbox" name="primary_goal" value="endurance"> Endurance / conditioning</label>
              <label><input type="checkbox" name="primary_goal" value="longevity"> Longevity / joint health</label>
              <label><input type="checkbox" name="primary_goal" value="energy"> Energy & daily performance</label>
            </fieldset>

            <!-- Q2 -->
            <fieldset class="question-group">
              <legend>2. Training frequency (typical week)</legend>
              <label><input type="radio" name="training_frequency" value="1-2x"> 1–2× / week</label>
              <label><input type="radio" name="training_frequency" value="3x"> 3× / week</label>
              <label><input type="radio" name="training_frequency" value="4-5x"> 4–5× / week</label>
              <label><input type="radio" name="training_frequency" value="6+x"> 6×+ / week</label>
              <label><input type="radio" name="training_frequency" value="irregular"> Irregular</label>
            </fieldset>

            <!-- Q3 -->
            <fieldset class="question-group">
              <legend>3. Training style (all that apply)</legend>
              <label><input type="checkbox" name="training_style" value="free_weights"> Free weights</label>
              <label><input type="checkbox" name="training_style" value="machines"> Machines</label>
              <label><input type="checkbox" name="training_style" value="bodyweight"> Bodyweight</label>
              <label><input type="checkbox" name="training_style" value="cardio"> Cardio (running, cycling)</label>
              <label><input type="checkbox" name="training_style" value="functional"> Functional / hybrid</label>
              <label><input type="checkbox" name="training_style" value="hiit"> Short intense sessions</label>
            </fieldset>

            <!-- Q4 -->
            <fieldset class="question-group">
              <legend>4. Constraints (all that apply)</legend>
              <label><input type="checkbox" name="constraints" value="time_limited"> Time-limited sessions</label>
              <label><input type="checkbox" name="constraints" value="joint_issues"> Joint / back sensitivity</label>
              <label><input type="checkbox" name="constraints" value="recovery_priority"> Recovery is a priority</label>
              <label><input type="checkbox" name="constraints" value="minimal_equipment"> Minimal equipment</label>
              <label><input type="checkbox" name="constraints" value="travel"> Travel / inconsistent schedule</label>
            </fieldset>

            <!-- Q5 -->
            <fieldset class="question-group">
              <legend>5. Nutrition priority (pick up to 2)</legend>
              <label><input type="checkbox" name="nutrition_priority" value="muscle_support"> Muscle support</label>
              <label><input type="checkbox" name="nutrition_priority" value="fat_loss"> Fat loss</label>
              <label><input type="checkbox" name="nutrition_priority" value="energy_focus"> Energy / focus</label>
              <label><input type="checkbox" name="nutrition_priority" value="digestion"> Digestive comfort</label>
              <label><input type="checkbox" name="nutrition_priority" value="simplicity"> Simplicity / low mental
                load</label>
            </fieldset>

            <!-- Q6 -->
            <fieldset class="question-group">
              <legend>6. Dietary style (all that apply)</legend>
              <label><input type="checkbox" name="dietary_style" value="mixed"> Flexible / no strict rules</label>
              <label><input type="checkbox" name="dietary_style" value="high_protein"> High-protein focused</label>
              <label><input type="checkbox" name="dietary_style" value="whole_foods"> Whole foods oriented</label>
              <label><input type="checkbox" name="dietary_style" value="vegan"> Vegan</label>
            </fieldset>

            <!-- Q7 -->
            <fieldset class="question-group">
              <legend>7. Avoidances</legend>
              <label><input type="checkbox" name="avoidances" value="ultra_processed"> Ultra-processed foods</label>
              <label><input type="checkbox" name="avoidances" value="added_sugars"> Added sugars</label>
              <label><input type="checkbox" name="avoidances" value="artificial_sweeteners"> Artificial
                sweeteners</label>
              <label><input type="checkbox" name="avoidances" value="stimulants"> Stimulants (e.g. caffeine)</label>
              <label><input type="checkbox" name="avoidances" value="none"> None</label>
            </fieldset>

            <!-- Q8 -->
            <fieldset class="question-group">
              <legend>8. Supplements stance</legend>
              <label><input type="radio" name="supplement_stance" value="regular_user"> Already use some
                regularly</label>
              <label><input type="radio" name="supplement_stance" value="open_cautious"> Open but cautious</label>
              <label><input type="radio" name="supplement_stance" value="evidence_based"> Only if evidence-based</label>
              <label><input type="radio" name="supplement_stance" value="prefer_none"> Prefer none</label>
            </fieldset>

            <!-- Q9 -->
            <fieldset class="question-group">
              <legend>9. Effort vs sustainability</legend>
              <label><input type="radio" name="sustainability" value="max_results"> Max results, even if
                demanding</label>
              <label><input type="radio" name="sustainability" value="balanced"> Balanced results & lifestyle</label>
              <label><input type="radio" name="sustainability" value="sustainability_first"> Long-term sustainability
                first</label>
            </fieldset>

            <!-- Q10 -->
            <fieldset class="question-group">
              <legend>10. Current priority (pick 1)</legend>
              <label><input type="radio" name="current_focus" value="visible_progress"> Visible progress</label>
              <label><input type="radio" name="current_focus" value="feeling_better"> Feeling better day-to-day</label>
              <label><input type="radio" name="current_focus" value="performance"> Performance</label>
              <label><input type="radio" name="current_focus" value="consistency"> Consistency / habit building</label>
            </fieldset>

            <!-- Q11 -->
            <fieldset class="question-group">
              <legend>11. Mental performance</legend>
              <label><input type="radio" name="mental_focus" value="not_priority"> Not a priority</label>
              <label><input type="radio" name="mental_focus" value="work_energy"> Important for work / daily
                energy</label>
              <label><input type="radio" name="mental_focus" value="training_focus"> Important during training</label>
              <label><input type="radio" name="mental_focus" value="both"> Both work and training</label>
              <label><input type="radio" name="mental_focus" value="struggling"> Actively struggling with focus</label>
            </fieldset>

            <!-- Q12 -->
            <fieldset class="question-group">
              <legend>12. Joints & tendons protection</legend>
              <label><input type="checkbox" name="joint_protection" value="none"> None</label>
              <label><input type="checkbox" name="joint_protection" value="knees"> Knees</label>
              <label><input type="checkbox" name="joint_protection" value="lower_back"> Lower back</label>
              <label><input type="checkbox" name="joint_protection" value="hips"> Hips</label>
              <label><input type="checkbox" name="joint_protection" value="shoulders"> Shoulders</label>
              <label><input type="checkbox" name="joint_protection" value="elbows_wrists"> Elbows / wrists</label>
              <label><input type="checkbox" name="joint_protection" value="achilles_ankles"> Achilles / ankles</label>
            </fieldset>

            <br>
            <div class="form-group">
              <label for="additional-context">Additional Context (max 500 characters)</label>
              <textarea id="additional-context" maxlength="500"
                placeholder="e.g. I have a sensitive stomach, I prefer natural sweeteners, I'm training for a marathon..."></textarea>
            </div>

            <div class="form-group">
              <label for="api-key">OpenAI API Key</label>
              <input type="password" id="api-key" placeholder="sk-...">
            </div>

            <button type="submit" class="btn-primary">Save Context</button>
          </div>
        </form>
      </section>
    </main>

    <footer class="disclaimer">
      This tool evaluates alignment with your stated preferences. It does not provide medical or nutritional advice.
    </footer>
  </div>

  <script src="popup.js" type="module"></script>
</body>

</html>
